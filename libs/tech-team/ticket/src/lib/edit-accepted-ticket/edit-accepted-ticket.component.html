<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<button id="back" (click)="goBack()"><i class="fa fa-arrow-circle-left" ></i>  Tickets</button>
<div class="gridContainer">
    <mat-card>
        <mat-card-header>
            <mat-card-title>{{ ticket.ticketType }}</mat-card-title>
            <mat-card-subtitle>
                <span class="material-icons">person_pin_circle</span>
                {{ ticket.ticketStreetAddress }}
            </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
            <div class="imageContainer">
                <img src="assets/{{ ticket.ticketImg }}" alt="IssueImage" onerror="" *ngIf="ticket.ticketImg !== ''" />
                <div class="centeredElement" *ngIf="ticket.ticketImg === ''">
                    <mat-spinner mode="indeterminate"> </mat-spinner>
                </div>
            </div>
            <div class="description">
                {{ ticket.ticketDescription }}
            </div>
            <div class="ticketInformation">
                <div class="status">
                    {{ ticket.ticketStatus }}
                </div>
                <div class="dateCreated" *ngIf="ticket.ticketCreateDate !== undefined">
                    <i>
                        {{ ticket.ticketCreateDate.toLocaleString() }}
                    </i>
                </div>
            </div>
            <div class="editTicketInformation">
                <div class="ticket_repair_time mt-3">
                    <mat-form-field appearance="outline" [floatLabel]="getFloatLabelValue()">
                        <mat-label>Estimated repair time (most common {{this.estTime}})</mat-label>
                        <input matInput placeholder="Estimated repair time" ngDefaultControl
                            [(ngModel)]="repair_time" />
                        <span matSuffix>hours</span>
                    </mat-form-field>
                </div>
                <div class="ticket_status mt-1">
                    <mat-form-field appearance="outline" [floatLabel]="getFloatLabelValue()">
                        <mat-label>Status</mat-label>
                        <mat-select placeholder="Status" ngDefaultControl [(ngModel)]="status">
                            <mat-option value="Accepted">Accepted</mat-option>
                            <mat-option value="Awaiting Material">Awaiting material</mat-option>
                            <mat-option value="In Progress">In Progress</mat-option>
                            <mat-option value="Finishing up">Finishing up</mat-option>
                            <mat-option value="Finished">Finished</mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div class="ticket_status mt-1 mb-3">
                    <mat-form-field appearance="outline" [floatLabel]="getFloatLabelValue()">
                        <mat-label>Estimated cost (most common {{this.estCost}})</mat-label>
                        <input matInput placeholder="Estimated cost" ngDefaultControl [(ngModel)]="cost" />
                    </mat-form-field>
                </div>
            </div>
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>Number</th>
                        <th>Description</th>
                        <th>Status</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let field of fieldArray; let i = index">
                        <td>
                            <!--<div style="padding-top: 10px; padding-left: 20px;">{{i+1}}</div>-->
                            <input [(ngModel)]="field.step" class="form-control" type="text" name="{{field.step}}" />
                        </td>
                        <td>
                            <input [(ngModel)]="field.description" class="form-control" type="text"
                                name="{{field.description}}" value="asd" />
                        </td>
                        <td>
                            <input [(ngModel)]="field.status" class="form-control" type="text"
                                name="{{field.status}}" />
                        </td>
                        <td>
                            <button class="btn btn-default" type="button" (click)="deleteFieldValue(i)">Delete</button>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input class="form-control" type="text" id="newAttributeStep"
                                [(ngModel)]="newAttribute.step" name="newAttributeCode" />
                        </td>
                        <td>
                            <input class="form-control" type="text" id="newAttributeDescription"
                                [(ngModel)]="newAttribute.description" name="newAttributeName" />
                        </td>
                        <td>
                            <input class="form-control" type="text" id="newAttributeStatus"
                                [(ngModel)]="newAttribute.status" name="newAttributePrice" />
                        </td>
                        <td>
                            <button class="btn btn-default" type="button" (click)="addFieldValue()">Add</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </mat-card-content>
        <mat-card-actions>
            <div class="buttonContainer">
                <div class="buttons">
                    <button mat-button (click)="update()"><b>Update</b></button>
                </div>
            </div>
        </mat-card-actions>
    </mat-card>
</div>